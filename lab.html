<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quant Lab - OpenQuant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0b0c15; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icons = {
            Code: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>,
            Bot: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="12" cy="5" r="2"/><path d="M12 7v4"/><line x1="8" y1="16" x2="8" y2="16"/><line x1="16" y1="16" x2="16" y2="16"/></svg>,
            Play: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
        };
        const Icon = ({ name, size = 16, className = "" }) => {
            const IconComp = Icons[name];
            return IconComp ? <span className={`inline-block ${className}`} style={{width: size, height: size}}><IconComp /></span> : null;
        };

        const Navbar = () => (
            <nav className="fixed top-0 w-full z-50 bg-[#0b0c15]/90 backdrop-blur-md border-b border-gray-800">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex items-center justify-between h-16">
                        <a href="openquant.html" className="flex items-center gap-2 cursor-pointer">
                            <div className="w-8 h-8 bg-gradient-to-br from-green-400 to-blue-600 rounded-lg flex items-center justify-center shadow-lg shadow-green-500/20">
                                <span className="font-bold text-white text-lg">O</span>
                            </div>
                            <span className="font-bold text-xl tracking-tight text-white">OpenQuant</span>
                        </a>
                        <div className="hidden md:block">
                            <div className="ml-10 flex items-center gap-1 text-sm font-medium">
                                <a href="openquant.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">首页</a>
                                <a href="dashboard.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">控制台</a>
                                <a href="lab.html" className="whitespace-nowrap text-green-400 px-3 py-2 rounded-md transition-colors border-b-2 border-green-400">量化实验室</a>
                                <a href="marketplace.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">策略广场</a>
                                <a href="data-center.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">数据中心</a>
                                <a href="academy.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">学院</a>
                                <a href="pricing.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">价格</a>
                                <a href="solutions.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">解决方案</a>
                                <a href="community.html" className="whitespace-nowrap text-gray-300 hover:text-green-400 px-3 py-2 rounded-md transition-colors">社区</a>
                            </div>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="hidden md:flex items-center gap-2 text-xs text-gray-400 bg-gray-900 px-3 py-1 rounded-full border border-gray-800">
                                <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                                Co-location Active
                            </div>
                            <button className="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors shadow-lg shadow-green-900/20">
                                登录 / 注册
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        );

        const Lab = () => {
            const [code, setCode] = useState(`import openquant as oq\n\n# 策略入口：Rust 引擎回调\n@oq.rust_accelerate\ndef on_tick(context, tick):\n    # 简单的双均线策略\n    ma_fast = oq.sma(tick.symbol, 5)\n    ma_slow = oq.sma(tick.symbol, 20)\n    \n    if ma_fast > ma_slow and context.pos == 0:\n        # 极速下单（微秒级）\n        oq.order_target_percent(tick.symbol, 1.0)\n        context.log(f"Long Signal: {tick.price}")\n        \n    elif ma_fast < ma_slow and context.pos > 0:\n        oq.order_target_percent(tick.symbol, 0)\n        context.log(f"Close Signal: {tick.price}")`);
            
            return (
                <div className="pt-16 h-screen flex flex-col bg-[#0b0c15] animate-fade-in overflow-hidden">
                    {/* Toolbar */}
                    <div className="h-14 border-b border-gray-800 bg-[#13151f] px-4 flex items-center justify-between shrink-0">
                        <div className="flex items-center gap-4">
                            <div className="flex items-center gap-2 text-white font-semibold">
                                <Icon name="Code" size={18} className="text-blue-400" />
                                <span>Quant Lab</span>
                            </div>
                            <div className="h-6 w-px bg-gray-700"></div>
                            <div className="flex items-center gap-2 text-sm text-gray-400">
                                <span>strategy_v1.py</span>
                                <span className="text-xs bg-gray-700 px-1.5 rounded">Unsaved</span>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            <button className="flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white px-3 py-1.5 rounded text-sm transition-colors border border-gray-700">
                                <Icon name="Bot" size={14} /> AI 优化
                            </button>
                            <button className="flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white px-4 py-1.5 rounded text-sm font-medium transition-colors shadow-lg shadow-green-900/20">
                                <Icon name="Play" size={14} /> 运行回测
                            </button>
                        </div>
                    </div>

                    <div className="flex-grow flex overflow-hidden">
                        {/* Sidebar */}
                        <div className="w-64 bg-[#0b0c15] border-r border-gray-800 hidden md:flex flex-col">
                            <div className="p-4 border-b border-gray-800 text-gray-400 text-xs font-bold uppercase tracking-wider">File Explorer</div>
                            <div className="p-2 space-y-1">
                                <div className="flex items-center gap-2 text-green-400 bg-green-500/10 px-3 py-2 rounded cursor-pointer"><span className="text-xs">PY</span> strategy_v1.py</div>
                                <div className="flex items-center gap-2 text-gray-400 hover:bg-gray-800/50 px-3 py-2 rounded cursor-pointer transition-colors"><span className="text-xs">JSON</span> config.json</div>
                                <div className="flex items-center gap-2 text-gray-400 hover:bg-gray-800/50 px-3 py-2 rounded cursor-pointer transition-colors"><span className="text-xs">LOG</span> backtest.log</div>
                            </div>
                        </div>

                        {/* Editor */}
                        <div className="flex-grow bg-[#0b0c15] flex flex-col">
                            <div className="flex-grow relative font-mono text-sm flex">
                                <div className="w-12 bg-[#0b0c15] border-r border-gray-800 text-gray-600 text-right pr-3 pt-4 select-none leading-6">
                                    {code.split('\n').map((_, i) => <div key={i}>{i+1}</div>)}
                                </div>
                                <textarea 
                                    value={code} 
                                    onChange={(e) => setCode(e.target.value)}
                                    className="flex-grow bg-[#0b0c15] text-gray-300 p-4 outline-none resize-none leading-6"
                                    spellCheck="false"
                                ></textarea>
                            </div>
                            
                            {/* Terminal / Logs */}
                            <div className="h-48 border-t border-gray-800 bg-[#13151f] p-4 font-mono text-xs overflow-y-auto">
                                <div className="flex items-center gap-2 text-gray-500 mb-2 pb-2 border-b border-gray-800">
                                    <span className="text-white border-b-2 border-green-400 pb-2 -mb-2.5">Output</span>
                                    <span className="hover:text-white cursor-pointer">Logs</span>
                                    <span className="hover:text-white cursor-pointer">Errors</span>
                                </div>
                                <div className="space-y-1">
                                    <div className="text-green-500/80">[System] Rust Engine Initialized (v2.4.0)</div>
                                    <div className="text-gray-400">[Info] Loaded historic data: BTC-USDT (2024-01-01 ~ 2024-06-01)</div>
                                    <div className="text-blue-400">[Backtest] Running... Speed: 150,000 ticks/sec</div>
                                    <div className="text-gray-400">...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<div><Navbar /><Lab /></div>);
    </script>
</body>
</html>



